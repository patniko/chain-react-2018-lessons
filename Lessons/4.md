# Lesson 4: Basic Camera App

1. Install additional package `react-native-camera` with Windows support by running `yarn add "rozele/react-native-camera#windows" --save` or `npm install "rozele/react-native-camera#windows" --save`
2. Link new package by running `react-native link react-native-camera`

3. Replace the `BaseScreen` component in the `welcomeScreen.tsx` file with a simple camera view.
```javascript
import Camera from 'react-native-camera';

<Camera
  ref={(cam) => {
    this.camera = cam;
  }}
  captureTarget={
      Platform.OS == 'ios' 
      ? Camera.constants.CaptureTarget.disk
      : Camera.constants.CaptureTarget.cameraRoll
  }
  style={styles.preview}
  aspect={Camera.constants.Aspect.fill}>
</Camera>
```

1. Add button and its handler to the welcomeScreen for capturing an image.
```html
<Text style={styles.capture} onPress={this.takePicture.bind(this)}>
  Capture
</Text>
```

```javascript
async takePicture() {
  const options = {};
  try
  {
    const data = await this.camera.capture({metadata: options});
    alert("Picture taken");
  }
  catch (err)
  {
    alert(err);
  }
}
```
4. Add some styles to clean up the layout of the camera view and don't forget to import `StyleSheet`.
```javascript
const styles = StyleSheet.create({
  container: {
    flex: 1,
    flexDirection: 'row',
  },
  preview: {
    flex: 1,
    justifyContent: 'flex-end',
    alignItems: 'center'
  },
  capture: {
    position: 'absolute',
    bottom: 0,
    backgroundColor: '#fff',
    borderRadius: 5,
    color: '#000',
    padding: 10,
    margin: 40
  }
});
```

## Android Configuration
If you're building for Android, update the following files to mirror the configurations below to build the Android project.
> AndroidManifest.xml
```
<uses-permission android:name="android.permission.CAMERA" />
```
> gradle.properties
```
android.enableAapt2=false
```
> android/gradle/wrapper/gradle-wrapper.properties
```
distributionUrl=https\://services.gradle.org/distributions/gradle-4.4-all.zip
```
> android/app/build.gradle
```gradle
compileSdkVersion 27
buildToolsVersion "27.0.3"
```
```
dependencies {
    implementation project(':react-native-camera')
    implementation project(':react-native-code-push')
    implementation project(':appcenter-crashes')
    implementation project(':appcenter-analytics')
    implementation project(':appcenter')
    implementation fileTree(dir: "libs", include: ["*.jar"])
    implementation "com.android.support:appcompat-v7:27.1.0"
    implementation "com.facebook.react:react-native:+"
}

// Most configurations shouldn't need this, but it's here just in case.
project.ext.react = [
        nodeExecutableAndArgs : ["{path to Node executable}"]
]
```
> android/build.gradle
```gradle
buildscript {
    repositories {
        jcenter()
        google()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.1.3'
    }
}

allprojects {
    repositories {
        mavenLocal()
        jcenter()
        maven {
            url "$rootDir/../node_modules/react-native/android"
        }
        maven { url "https://jitpack.io" }
        maven { url "https://maven.google.com" }
        google()
    }
}

subprojects {
    project.configurations.all {
        resolutionStrategy.eachDependency { details ->
            if (details.requested.group == 'com.android.support'
                    && !details.requested.name.contains('multidex') ) {
                details.useVersion "26.0.1"
            }
        }
    }

    afterEvaluate {
        project -> if (project.hasProperty("android")) {
            android {
                compileSdkVersion 26
                buildToolsVersion '27.0.3'
            }
        }
    }
}
```
## iOS Configuration
If you're building for iOS, make sure to make the following configuration changes.
1. In XCode, in the project navigator, right click Libraries ➜ Add Files to [your project's name]
2. Go to node_modules ➜ react-native-camera and add RNCamera.xcodeproj
Expand the RNCamera.xcodeproj ➜ Products folder
3. In XCode, in the project navigator, select your project. Add libRNCamera.a to your project's Build Phases ➜ Link Binary With Libraries
4. Click RNCamera.xcodeproj in the project navigator and go the Build Settings tab. Make sure 'All' is toggled on (instead of 'Basic'). In the 5. Search Paths section, look for Header Search Paths and make sure it contains both $(SRCROOT)/../../react-native/React and $(SRCROOT)/../../../React - mark both as recursive.
5. Add `NSCameraUsageDescription` and `NSPhotoLibraryAddUsageDescription` to `info.plist`

## _Exit Criteria_
1. `react-native-camera` package added and linked.
2. Working camera view in main app layout.
3. Click capture button and alert appears.